#!/usr/bin/env bash
# Install by pointing git to this directory: `git config core.hooksPath .githooks`
set -euo pipefail

run() {
  echo "==> $*"
  "$@"
}

run cargo fmt --all -- --check
run cargo clippy --all-targets --all-features -- -D warnings
run cargo test --all
npm run typecheck --prefix facades/typescript
npm test --prefix facades/typescript -- --run
sh scripts/build-all.sh
sh scripts/build-wasm.sh